# 数据提取报告

**生成时间**: 2025-12-16  
**处理人**: Executor

## 📊 数据概览

### 原始数据
| 指标 | 数值 |
|------|------|
| ROS Bag 文件数 | 15 个 |
| Bag 文件来源 | 25-10-08-20-35-40_0 至 _14 |
| 总大小 | ~500 MB |

### 提取结果
| 指标 | 数值 |
|------|------|
| 提取的总帧数 | 992 张 RGB 图像 |
| 图像分辨率 | 640x480 (典型) |
| 相机视角 | 2 个 (nuwa_1, nuwa_2) |
| 提取后大小 | 24 MB |
| 采样率 | 每 2 帧取 1 帧 |

## 📁 数据分布

### 各 Bag 文件提取统计

| Bag 文件 | 原始帧数 | 提取帧数 | 状态 |
|---------|---------|---------|------|
| 25-10-08-20-35-40_0 | 104 | 52 | ✅ |
| 25-10-08-20-35-40_1 | 104 | 51 | ✅ |
| 25-10-08-20-35-40_2 | 104 | 51 | ✅ |
| 25-10-08-20-35-40_3 | 104 | 51 | ✅ |
| 25-10-08-20-35-40_4 | 104 | 52 | ✅ |
| 25-10-08-20-35-40_5 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_6 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_7 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_8 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_9 | 105 | 52 | ✅ NEW |
| 25-10-08-20-35-40_10 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_11 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_12 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_13 | 104 | 52 | ✅ NEW |
| 25-10-08-20-35-40_14 | 8 | 4 | ✅ NEW (短视频) |

**总计**: ~1548 原始帧 → 992 提取帧

## 🎯 种子数据集

### 旧版本 (v1)
- **数量**: 100 张
- **路径**: `data/seed_dataset/`
- **状态**: 已标注 20 张 (用于 Day 2 验证训练)

### 新版本 (v2) 🆕
- **数量**: 200 张
- **路径**: `data/seed_dataset_v2/`
- **选择方法**: uniform 均匀采样
- **覆盖范围**: 全部 15 个 bag 文件
- **状态**: 待标注 ⏳

## 🔧 提取过程

### 使用工具
```bash
python src/data_processing/extract_rosbag_images.py \
    --batch data/raw data/frames 2
```

### Topic 信息
- `/ascamera_nuwa_1/rgb0/image` - 前置摄像头
- `/ascamera_nuwa_2/rgb0/image` - 后置摄像头

### 输出结构
```
data/frames/
├── 25-10-08-20-35-40_0/
│   ├── ascamera_nuwa_1_rgb0_image/
│   │   ├── frame_000000.jpg
│   │   ├── frame_000001.jpg
│   │   └── ...
│   └── ascamera_nuwa_2_rgb0_image/
│       └── ...
├── 25-10-08-20-35-40_1/
└── ...
```

## 📈 数据增长对比

| 指标 | Day 1 (旧) | Day 16 (新) | 增长 |
|------|-----------|------------|------|
| Bag 文件 | 5 | 15 | +200% |
| 提取帧数 | ~260 | 992 | +281% |
| 种子数据集 | 100 | 200 | +100% |

## ✅ 验证检查

- [x] 所有 15 个 bag 文件成功提取
- [x] 图像质量检查 (无损坏文件)
- [x] 两个相机视角数据完整
- [x] 文件命名规范统一
- [x] 目录结构符合预期

## 🎯 下一步行动

1. **标注新数据**: 使用 LabelImg 标注 200 张种子数据集 v2
   ```bash
   labelImg data/seed_dataset_v2 data/seed_dataset_v2/classes.txt
   ```

2. **数据增强**: 考虑对标注数据进行增强
   - 随机亮度调整
   - 随机翻转 (水平)
   - 轻微旋转

3. **完整训练**: 使用扩展数据集进行 50+ epoch 训练
   ```bash
   bash scripts/train_day2.sh train yolo11n.pt 50
   ```

4. **数据分析**: 生成可视化报告
   - 帧差分析 (检测动态物体)
   - 亮度分布统计
   - 障碍物类型分布

## 💾 存储信息

| 目录 | 大小 | 文件数 | 说明 |
|------|------|--------|------|
| `data/raw/` | ~500 MB | 15 | ROS Bag 原始文件 |
| `data/frames/` | 24 MB | 992 | 提取的 RGB 图像 |
| `data/seed_dataset/` | 2.9 MB | 100 | 旧版种子数据集 |
| `data/seed_dataset_v2/` | ~5.8 MB | 200 | 新版种子数据集 |

## 📝 备注

- bag_14 仅 4 帧，可能是测试录制或录制中断
- 两个相机视角的帧数基本一致（±1帧）
- 采样率设为 2，保证了数据多样性同时控制了数据量
- 建议优先标注 v2 数据集，覆盖更全面的场景
